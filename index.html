<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WBC 2026">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3516/3516315.png">
    <title>WBC æ‡‰æ´ä¹‹æ—… 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@700&family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        :root {
            --wbc-bg-main: #002B24; /* å®˜æ–¹æ·±ç¶ åº• */
            --wbc-card-light: #F8F9FA; /* æ·ºè‰²å­—å¡ï¼Œæé«˜é–±è®€æ€§ */
            --wbc-accent-blue: #0054A6;
            --wbc-accent-red: #E4002B;
            --wbc-accent-yellow: #FFD200;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--wbc-bg-main);
            color: #E2E8F0;
            -webkit-tap-highlight-color: transparent;
        }

        /* æ”¤å¹³çš„æ—¥æœŸé¸å–® */
        .date-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            padding: 10px;
        }
        .date-item { opacity: 0.4; transition: 0.3s; }
        .active-date { opacity: 1 !important; transform: scale(1.05); }
        .active-date .date-box { border-bottom: 3px solid var(--wbc-accent-red); color: var(--wbc-accent-yellow); }

        /* è¡Œç¨‹å­—å¡ï¼šæ·ºåº•æ·±å­— */
        .itinerary-card {
            background: var(--wbc-card-light);
            color: #1A202C;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            border-left: 5px solid var(--wbc-accent-blue);
        }

        /* æ™‚é–“è»¸ç·š */
        .timeline-line { position: absolute; left: 19px; top: 10px; bottom: 20px; width: 2px; background: rgba(255,255,255,0.1); z-index: 0; }
        .timeline-dot { z-index: 10; background-color: var(--wbc-bg-main); border: 2px solid var(--wbc-accent-yellow); width: 12px; height: 12px; border-radius: 50%; position: absolute; left: 14px; top: 8px; }

        /* è½‰ä¹˜å‹•ç·šæ¨£å¼ */
        .transit-row { margin-left: 1.5rem; padding: 0.8rem 1rem; border-left: 2px dashed rgba(255,255,255,0.2); }
        .transit-label { background: rgba(255,255,255,0.05); color: #90CDF4; font-size: 10px; font-weight: bold; padding: 4px 10px; border-radius: 8px; display: inline-flex; align-items: center; gap: 4px; border: 1px solid rgba(255,255,255,0.1); }

        #map-container { height: 240px; border-radius: 1rem; margin-top: 1rem; filter: invert(1) hue-rotate(180deg) brightness(0.8); }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <header class="bg-[#002B24] pt-4 pb-2 sticky top-0 z-30 shadow-xl">
        <div class="text-center mb-2 px-5">
            <h1 class="text-[9px] tracking-[0.3em] text-cyan-400 font-bold uppercase">2026 WBC TOKYO / NAGOYA</h1>
            <h2 class="text-lg font-bold text-white font-serif">âš¾ æ‡‰æ´ä¹‹æ—…æ”»ç•¥</h2>
        </div>
        
        <div id="date-picker-container" class="date-grid"></div>

        <div class="flex justify-around px-10 py-2 border-t border-white/10 mt-2">
            <button onclick="toggleView('checklist')" class="text-gray-400 flex flex-col items-center"><i class="fas fa-toolbox"></i><span class="text-[8px]">åŠ©æ‰‹</span></button>
            <button onclick="toggleView('itinerary')" class="text-yellow-400 flex flex-col items-center"><i class="fas fa-calendar-day"></i><span class="text-[8px]">è¡Œç¨‹</span></button>
            <button onclick="toggleView('ledger')" class="text-gray-400 flex flex-col items-center"><i class="fas fa-wallet"></i><span class="text-[8px]">å¸³æœ¬</span></button>
        </div>
    </header>

    <main id="content" class="flex-1 overflow-y-auto p-5 pb-24"></main>

    <div id="detail-modal" class="fixed inset-0 bg-black/90 z-50 hidden flex items-end justify-center transition-opacity duration-300">
        <div class="bg-[#F8F9FA] w-full max-w-md rounded-t-3xl overflow-hidden max-h-[85vh] flex flex-col translate-y-full transition-transform duration-300">
            <div class="relative h-48 flex-shrink-0">
                <img id="modal-img" src="" class="w-full h-full object-cover">
                <button onclick="closeModal()" class="absolute top-4 right-4 bg-black/50 text-white rounded-full p-2"><i class="fas fa-xmark"></i></button>
            </div>
            <div class="p-6 overflow-y-auto text-gray-800">
                <span id="modal-tag" class="text-[10px] font-bold bg-blue-600 text-white px-2 py-1 rounded"></span>
                <h3 id="modal-title" class="text-xl font-bold mt-2 mb-4"></h3>
                <p id="modal-desc" class="text-sm leading-relaxed mb-6 whitespace-pre-line"></p>
                <a id="modal-google-link" href="#" target="_blank" class="w-full bg-blue-700 text-white py-4 rounded-xl flex items-center justify-center font-bold text-sm shadow-lg"><i class="fab fa-google mr-2"></i> Google Maps å°èˆª</a>
            </div>
        </div>
    </div>

    <script>
        const startDate = new Date('2026-03-04');
        const daysOfWeek = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
        let currentDay = 1;

        // --- å®Œæ•´ 7 å¤©è¡Œç¨‹è³‡æ–™ ---
        const tripData = {
            1: [
                { time: "07:35", tag: "Flight", title: "æ¡ƒåœ’æ©Ÿå ´ CI154 å‡ºç™¼", icon: "fa-plane", map: "æ¡ƒåœ’åœ‹éš›æ©Ÿå ´", desc: "è«‹æ–¼ 05:30 æŠµé”ç¬¬äºŒèˆªå»ˆè¾¦ç†ç™»æ©Ÿã€‚" },
                { transit: "Î¼-sky ç‰¹æ€¥", from: "ä¸­éƒ¨æ©Ÿå ´ç«™", to: "åéµåå¤å±‹ç«™", duration: "28åˆ†" },
                { time: "11:45", tag: "Transit", title: "æŠµé”åå¤å±‹è»Šç«™", icon: "fa-location-dot", map: "JRåå¤å±‹ç«™", desc: "æŠµé”å¾Œè«‹å‰å¾€ JR æ–°å¹¹ç·šè½‰ä¹˜çª—å£ã€‚" },
                { transit: "æ–°å¹¹ç·š Nozomi", from: "åå¤å±‹ç«™", to: "æ±äº¬ç«™", duration: "100åˆ†", note: "âš ï¸ éœ€é ç´„ç‰¹å¤§è¡Œæä½" },
                { time: "16:40", tag: "Hotel", title: "APA Hotel æ–°å¾¡å¾’ç”º Check-in", icon: "fa-hotel", map: "APA Hotel Shin Okachimachi", desc: "æŠµé”æ±äº¬åŸºåœ°ã€‚ä¼‘æ¯ç‰‡åˆ»æº–å‚™æ¡è²·ã€‚" },
                { transit: "æ­¥è¡Œ", from: "é£¯åº—", to: "é˜¿ç¾æ©«ç”º", duration: "12åˆ†" },
                { time: "18:00", tag: "Night", title: "é˜¿ç¾æ©«ç”º & ç§‹è‘‰åŸ", icon: "fa-shopping-bag", map: "ç§‹è‘‰åŸ", desc: "æ™šé¤èˆ‡æ‡‰æ´ç‰©è³‡è£œçµ¦ã€‚" },
                { transit: "æ­¥è¡Œ", from: "ç§‹è‘‰åŸ", to: "é£¯åº—", duration: "15åˆ†" },
                { time: "21:00", tag: "Hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", icon: "fa-moon", map: "APA Hotel Shin Okachimachi" }
            ],
            2: [
                { time: "08:30", tag: "Hotel", title: "å¾é£¯åº—å‡ºç™¼", icon: "fa-sun", from: "APA æ–°å¾¡å¾’ç”º" },
                { transit: "åœ°éµ éŠ€åº§ç·š", from: "æ–°å¾¡å¾’ç”ºç«™", to: "æ·ºè‰ç«™", duration: "10åˆ†" },
                { time: "09:00", tag: "Culture", title: "æ·ºè‰å¯ºåƒæ‹œ", icon: "fa-torii-gate", map: "æ·ºè‰å¯º", desc: "æ—©èµ·åƒæ‹œï¼Œè³¼è²·å¿…å‹å¾¡å®ˆã€‚" },
                { transit: "åœ°éµ å—åŒ—ç·š", from: "æºœæ± å±±ç‹ç«™", to: "å¾Œæ¨‚åœ’ç«™", duration: "15åˆ†" },
                { time: "12:00", tag: "WBC", title: "âš¾ å°ç£ vs æ¾³æ´²", icon: "fa-baseball-bat-ball", map: "æ±äº¬å·¨è›‹", desc: "WBC é¦–æˆ°ï¼å°ç£è‹±é›„åŠ æ²¹ï¼" },
                { transit: "åœ°éµ ä¸‰ç”°ç·š", from: "æ°´é“æ©‹ç«™", to: "ç¥ä¿ç”ºç«™", duration: "3åˆ†" },
                { time: "16:00", tag: "Shop", title: "Mizuno ç¥ä¿ç”ºæ——è‰¦åº—", icon: "fa-store", map: "Mizuno Tokyo", desc: "è³¼è²· WBC æ‡‰æ´å•†å“æˆ–å°ˆæ¥­é‹å‹•è£å‚™ã€‚" },
                { transit: "åœ°éµ æ–°å®¿ç·š", from: "ç¥ä¿ç”ºç«™", to: "æ–°å®¿ç«™", duration: "10åˆ†" },
                { time: "17:30", tag: "Dinner", title: "æ–°å®¿é€›è¡— & æ™šé¤", icon: "fa-utensils", map: "æ–°å®¿æ±å£", desc: "æ„Ÿå—ç¹è¯å¤œæ™šã€‚" },
                { transit: "åœ°éµ å¤§æ±Ÿæˆ¶ç·š", from: "æ–°å®¿è¥¿å£ç«™", to: "æ–°å¾¡å¾’ç”ºç«™", duration: "18åˆ†" },
                { time: "21:00", tag: "Hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", icon: "fa-hotel", map: "APA Hotel Shin Okachimachi" }
            ],
            3: [
                { time: "08:00", tag: "Hotel", title: "é£¯åº—å‡ºç™¼ä¸€æ—¥éŠ", icon: "fa-suitcase-rolling" },
                { transit: "JR æ¹˜å—æ–°å®¿ç·š", from: "æ–°å®¿ç«™", to: "éŒå€‰ç«™", duration: "60åˆ†" },
                { time: "09:30", tag: "Tour", title: "éŒå€‰ã€æ±Ÿä¹‹å³¶å·¡ç¦®", icon: "fa-umbrella-beach", map: "éŒå€‰é«˜æ ¡å‰", desc: "æ±Ÿä¹‹é›»ã€çŒç±ƒé«˜æ‰‹å¹³äº¤é“ã€å¤§ä½›ã€‚" },
                { transit: "å°ç”°æ€¥ æµªæ¼«ç‰¹å¿«", from: "ç‰‡ç€¨æ±Ÿä¹‹å³¶", to: "æ–°å®¿ç«™", duration: "70åˆ†" },
                { time: "19:00", tag: "WBC", title: "ğŸ“º è§€æˆ°ï¼šå°ç£ vs æ—¥æœ¬", icon: "fa-tv", map: "HUB Akihabara", desc: "å‰å¾€é…’å§èˆ‡å¤§æ‰¹çƒè¿·æ‡‰æ´ï¼" },
                { time: "22:00", tag: "Hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", icon: "fa-moon" }
            ],
            4: [
                { time: "08:30", tag: "Hotel", title: "é£¯åº—å‡ºç™¼", icon: "fa-sun" },
                { transit: "åœ°éµ åƒä»£ç”°ç·š", from: "æ–°å¾¡å¾’ç”ºç«™", to: "åœ‹æœƒè­°äº‹å ‚å‰ç«™", duration: "15åˆ†" },
                { time: "09:00", tag: "Culture", title: "æ—¥æç¥ç¤¾åƒæ‹œ", icon: "fa-vihara", map: "æ—¥æç¥ç¤¾", desc: "æ¬£è³å±±ç‹é³¥å±…ã€‚" },
                { time: "12:00", tag: "WBC", title: "âš¾ å°ç£ vs æ·å…‹", icon: "fa-baseball-bat-ball", map: "æ±äº¬å·¨è›‹", desc: "å†æ¬¡é€²å…¥å·¨è›‹æ‡‰æ´ï¼" },
                { time: "17:30", tag: "Shopping", title: "åŸå®¿ & æ¾€è°·", icon: "fa-masks-theater", map: "æ¾€è°·", desc: "æœè–æ¾€è°·åå­—è·¯å£ã€‚" },
                { time: "21:00", tag: "Hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", icon: "fa-hotel" }
            ],
            5: [
                { time: "09:00", tag: "Hotel", title: "é£¯åº— Checkout å¯„è¡Œæ", icon: "fa-suitcase" },
                { time: "12:00", tag: "WBC", title: "âš¾ å°ç£ vs éŸ“åœ‹", icon: "fa-fire", map: "æ±äº¬å·¨è›‹", desc: "ç¶“å…¸å°éŸ“å¤§æˆ°ï¼" },
                { transit: "JR ä¸­å¤®ç·š", from: "æ°´é“æ©‹ç«™", to: "æ±äº¬ç«™", duration: "10åˆ†" },
                { transit: "æ–°å¹¹ç·š Nozomi", from: "æ±äº¬ç«™", to: "åå¤å±‹ç«™", duration: "100åˆ†" },
                { time: "20:30", tag: "Hotel", title: "APA åå¤å±‹ç«™å‰åŒ— Check-in", icon: "fa-hotel", map: "APA Hotel Nagoya Ekimae Kita" }
            ],
            6: [
                { time: "09:00", tag: "Hotel", title: "åå¤å±‹é£¯åº—å‡ºç™¼", icon: "fa-sun" },
                { transit: "åœ°éµ ååŸç·š", from: "åå¤å±‹ç«™", to: "å¸‚å½¹æ‰€ç«™", duration: "12åˆ†" },
                { time: "09:30", tag: "Sightseeing", title: "åå¤å±‹åŸå·¡ç¦®", icon: "fa-chess-rook", map: "åå¤å±‹åŸ", desc: "çœ‹å£¯è§€é‡‘é¯±ã€‚" },
                { time: "12:00", tag: "Market", title: "å¤§é ˆè§€éŸ³å•†åº—è¡—", icon: "fa-store", map: "å¤§é ˆè§€éŸ³", desc: "åå¤å±‹ç‰¹è‰²å°åƒè£œçµ¦ã€‚" },
                { time: "16:00", tag: "Night", title: "æ¦®å•†åœˆ & ç¶ æ´² 21", icon: "fa-tower-observation", map: "Oasis 21", desc: "çœ‹å¤œæ™¯äº«ç”¨å‘³å™Œè±¬æ’æ™šé¤ã€‚" },
                { time: "20:30", tag: "Hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", icon: "fa-hotel" }
            ],
            7: [
                { time: "07:00", tag: "Hotel", title: "é£¯åº— Checkout å‡ºç™¼", icon: "fa-plane-departure" },
                { transit: "Î¼-sky ç‰¹æ€¥", from: "åéµåå¤å±‹ç«™", to: "ä¸­éƒ¨æ©Ÿå ´ç«™", duration: "28åˆ†" },
                { time: "09:50", tag: "Flight", title: "CI151 é£›å¾€æ¡ƒåœ’", icon: "fa-plane-arrival", map: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", desc: "çµæŸç†±è¡€ä¹‹æ—…ã€‚" }
            ]
        };

        function renderDatePicker() {
            const picker = document.getElementById('date-picker-container');
            picker.innerHTML = '';
            for (let i = 0; i < 7; i++) {
                const date = new Date(startDate);
                date.setDate(date.getDate() + i);
                const dayNum = i + 1;
                const div = document.createElement('div');
                div.className = `date-item cursor-pointer text-center ${dayNum === currentDay ? 'active-date' : ''}`;
                div.onclick = () => { currentDay = dayNum; renderDatePicker(); renderItinerary(); };
                div.innerHTML = `
                    <div class="date-box p-1">
                        <div class="text-[7px] uppercase opacity-70">Mar</div>
                        <div class="text-lg font-bold date-num">${date.getDate()}</div>
                        <div class="text-[7px] opacity-70">${daysOfWeek[date.getDay()]}</div>
                    </div>
                `;
                picker.appendChild(div);
            }
        }

        function renderItinerary() {
            const container = document.getElementById('content');
            container.innerHTML = '';
            let html = '<div class="relative"><div class="timeline-line"></div>';
            
            tripData[currentDay].forEach(item => {
                if (item.transit) {
                    html += `
                    <div class="transit-row">
                        <div class="transit-badge">
                            <i class="fas ${item.icon || 'fa-train'}"></i>
                            <span>${item.from} â†’ ${item.to}</span>
                            <span class="mx-1">|</span>
                            <span>${item.duration}</span>
                            ${item.note ? `<br><span class="text-orange-400 text-[8px]">${item.note}</span>` : ''}
                        </div>
                    </div>`;
                } else {
                    html += `
                    <div class="relative mb-6 pl-10">
                        <div class="timeline-dot"></div>
                        <div class="itinerary-card p-4 transition-transform active:scale-95" onclick="showModal('${encodeURIComponent(JSON.stringify(item))}')">
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-[10px] font-bold text-blue-700 tracking-widest uppercase">${item.tag}</span>
                                <span class="text-[11px] font-bold text-gray-400">${item.time}</span>
                            </div>
                            <h3 class="text-base font-bold">${item.title}</h3>
                            ${item.desc ? `<p class="text-[10px] text-gray-500 mt-1 line-clamp-1">${item.desc}</p>` : ''}
                        </div>
                    </div>`;
                }
            });
            container.innerHTML = html + '</div><div id="map-container"></div>';
            renderDailyMap();
        }

        function renderDailyMap() {
            if (map) map.remove();
            map = L.map('map-container', { zoomControl: false, attributionControl: false });
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);
            const markers = [];
            tripData[currentDay].forEach(p => { 
                if (p.lat && p.lng) { 
                    L.marker([p.lat, p.lng]).addTo(map); 
                    markers.push([p.lat, p.lng]); 
                } 
            });
            if (markers.length > 0) map.fitBounds(L.polyline(markers).getBounds(), { padding: [30, 30] });
        }

        function showModal(itemStr) {
            const item = JSON.parse(decodeURIComponent(itemStr));
            const modal = document.getElementById('detail-modal');
            document.getElementById('modal-img').src = item.img || "https://images.unsplash.com/photo-1542365887-11499f1ddee5?q=80&w=1000";
            document.getElementById('modal-tag').textContent = item.tag;
            document.getElementById('modal-title').textContent = item.title;
            document.getElementById('modal-desc').textContent = item.desc || "å¾é£¯åº—å‡ºç™¼/è¿”å›ï¼Œæº–å‚™é–‹å§‹æ–°çš„ä¸€å¤©æˆ–ä¼‘æ¯ã€‚";
            document.getElementById('modal-google-link').href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map || item.title)}`;
            modal.classList.remove('hidden');
            setTimeout(() => { modal.classList.remove('opacity-0'); modal.querySelector('div').classList.remove('translate-y-full'); }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('detail-modal');
            modal.classList.add('opacity-0');
            modal.querySelector('div').classList.add('translate-y-full');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        }

        function toggleView(view) {
            alert(view + " æ¨¡çµ„è¼‰å…¥ä¸­...");
            if (view === 'itinerary') renderItinerary();
        }

        window.onload = initApp;
    </script>
</body>
</html>
